"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[101],{57308:function(ee,I,t){t.r(I),t.d(I,{default:function(){return J}});var L=t(15009),P=t.n(L),k=t(99289),o=t.n(k),K=t(5574),c=t.n(K),w=t(56071),_=t(47486),m=t(2453),x=t(98138),M=t(41972),A=t(24311),O=t(14726),F=t(96074),D=t(4393),U=t(67294),S=t(96974),X=t(97857),N=t.n(X),V=t(6157),r=t(85893);function W(T){var j=T.trim().split(`
`).map(function(l){return l.split(",")}),g=j[0],e=j.slice(1),n=g.map(function(l,a){return{field:a.toString(),caption:l}}),s=e.map(function(l){return l.map(function(a,u){return a.trim()})});return{columns:n,records:s}}var R=function(j){var g=j.csvData,e=W(g);return(0,r.jsx)(V.e,{option:N()(N()({},e),{},{autoFillHeight:!0}),style:{height:"405px"}})},z=R,Z=_.Z.Title,b=_.Z.Text,G=function(){var j=(0,U.useState)(),g=c()(j,2),e=g[0],n=g[1],s=(0,U.useState)(null),l=c()(s,2),a=l[0],u=l[1],$=(0,U.useState)(!1),d=c()($,2),p=d[0],i=d[1],E=(0,S.UO)(),ae=E.id,re=(0,S.s0)(),Y="#52c41a",q=function(){var C=o()(P()().mark(function v(){var y;return P()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.prev=0,h.next=3,(0,w.LY)({id:ae});case 3:y=h.sent,y.data?n(y.data):m.ZP.error(y.message),h.next=10;break;case 7:h.prev=7,h.t0=h.catch(0),m.ZP.error("Failed to get chart details,"+h.t0.message);case 10:case"end":return h.stop()}},v,null,[[0,7]])}));return function(){return C.apply(this,arguments)}}(),ne=function(v){var y=v.visible,B=v.onCancel,h=v.onEdit,f=v.chart,ue=x.Z.useForm(),oe=c()(ue,1),H=oe[0],ce=function(){H.validateFields().then(function(Q){h(Q),H.resetFields()}).catch(function(Q){console.log("Validation Failed:",Q)})};return(0,r.jsx)(M.Z,{title:"Edit Chart",visible:y,onCancel:B,onOk:ce,children:(0,r.jsxs)(x.Z,{form:H,initialValues:f,children:[(0,r.jsx)(x.Z.Item,{name:"id",label:"Chart ID",children:(0,r.jsx)(A.Z,{readOnly:!0})}),(0,r.jsx)(x.Z.Item,{name:"chartName",label:"Chart Name",rules:[{required:!1,message:"Please enter chart name"}],children:(0,r.jsx)(A.Z,{})}),(0,r.jsx)(x.Z.Item,{name:"genResult",label:"Analysis Conclusion",rules:[{required:!1}],children:(0,r.jsx)(A.Z.TextArea,{rows:8})})]})})},te=function(v){u(v),i(!0)},se=function(){var C=o()(P()().mark(function v(y){var B;return P()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.prev=0,f.next=3,(0,w.B9)(y);case 3:B=f.sent,B.data?(m.ZP.success("Successfully updated"),q()):m.ZP.error(B.message),f.next=10;break;case 7:f.prev=7,f.t0=f.catch(0),m.ZP.error("Update failed: "+f.t0.message);case 10:i(!1);case 11:case"end":return f.stop()}},v,null,[[0,7]])}));return function(y){return C.apply(this,arguments)}}(),ie=function(){i(!1)},le=function(){re(-1)};return(0,U.useEffect)(function(){q()},[]),(0,r.jsxs)("div",{className:"chart-detail-container",children:[(0,r.jsxs)("div",{className:"header",children:[(0,r.jsx)(O.ZP,{type:"primary",size:"large",onClick:le,className:"back-button",children:"Back"}),(0,r.jsx)(Z,{level:3,children:"Chart Details"})]}),(0,r.jsxs)("div",{className:"content-container",children:[(0,r.jsxs)("div",{className:"left-section",children:[(0,r.jsx)("div",{className:"section-title",children:(0,r.jsx)(F.Z,{style:{color:Y},children:"Original Data"})}),(0,r.jsx)("div",{className:"data-container",children:(e==null?void 0:e.chartData)&&(0,r.jsx)(z,{csvData:e==null?void 0:e.chartData})})]}),(0,r.jsxs)("div",{className:"right-section",children:[(0,r.jsx)("div",{className:"section-title",children:(0,r.jsx)(F.Z,{style:{color:Y},children:"Chart Information"})}),(0,r.jsxs)(D.Z,{hoverable:!0,className:"info-card",children:[(0,r.jsxs)("div",{className:"info-item",children:[(0,r.jsx)(b,{strong:!0,children:"Chart ID:"})," ",e==null?void 0:e.id]}),(0,r.jsxs)("div",{className:"info-item",children:[(0,r.jsx)(b,{strong:!0,children:"Analysis Goal:"})," ",e==null?void 0:e.goal]}),(0,r.jsxs)("div",{className:"info-item",children:[(0,r.jsx)(b,{strong:!0,children:"Chart Type:"})," ",e==null?void 0:e.chartType]}),(0,r.jsxs)("div",{className:"info-item",children:[(0,r.jsx)(b,{strong:!0,children:"Chart Name:"})," ",e==null?void 0:e.chartName]}),(0,r.jsxs)("div",{className:"info-item",children:[(0,r.jsx)(b,{strong:!0,children:"Analysis Time:"})," ",new Date(e==null?void 0:e.createTime).toLocaleString("zh-CN")]})]}),(0,r.jsx)("div",{className:"section-title",children:(0,r.jsx)(F.Z,{style:{color:Y},children:"Analysis Conclusion"})}),(0,r.jsxs)(D.Z,{hoverable:!0,className:"conclusion-card",children:[(0,r.jsx)("div",{className:"conclusion-text",children:e==null?void 0:e.genResult}),(0,r.jsx)(O.ZP,{type:"primary",size:"large",onClick:function(){return te(e)},className:"edit-button",children:"Edit Chart"})]})]})]}),(0,r.jsx)(ne,{visible:p,onCancel:ie,onEdit:se,chart:a})]})},J=G},56071:function(ee,I,t){t.d(I,{B9:function(){return j},LY:function(){return W},P6:function(){return U},Tr:function(){return J},ab:function(){return A},nA:function(){return V},oG:function(){return z},y4:function(){return b}});var L=t(52677),P=t.n(L),k=t(15009),o=t.n(k),K=t(97857),c=t.n(K),w=t(99289),_=t.n(w),m=t(80854);function x(e,n){return M.apply(this,arguments)}function M(){return M=_asyncToGenerator(_regeneratorRuntime().mark(function e(n,s){return _regeneratorRuntime().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",request("/api/chart/add",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:n},s||{})));case 1:case"end":return a.stop()}},e)})),M.apply(this,arguments)}function A(e,n){return O.apply(this,arguments)}function O(){return O=_()(o()().mark(function e(n,s){return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,m.request)("/api/chart/delete",c()({method:"POST",headers:{"Content-Type":"application/json"},data:n},s||{})));case 1:case"end":return a.stop()}},e)})),O.apply(this,arguments)}function F(e,n){return D.apply(this,arguments)}function D(){return D=_asyncToGenerator(_regeneratorRuntime().mark(function e(n,s){return _regeneratorRuntime().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",request("/api/chart/edit",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:n},s||{})));case 1:case"end":return a.stop()}},e)})),D.apply(this,arguments)}function U(e,n,s,l){return S.apply(this,arguments)}function S(){return S=_()(o()().mark(function e(n,s,l,a){var u;return o()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return u=new FormData,l&&u.append("file",l),Object.keys(s).forEach(function(p){var i=s[p];i!=null&&(P()(i)==="object"&&!(i instanceof File)?i instanceof Array?i.forEach(function(E){return u.append(p,E||"")}):u.append(p,JSON.stringify(i)):u.append(p,i))}),d.abrupt("return",(0,m.request)("/api/chart/gen",c()({method:"POST",params:c()({},n),data:u,requestType:"form"},a||{})));case 4:case"end":return d.stop()}},e)})),S.apply(this,arguments)}function X(e,n,s,l){return N.apply(this,arguments)}function N(){return N=_asyncToGenerator(_regeneratorRuntime().mark(function e(n,s,l,a){var u;return _regeneratorRuntime().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return u=new FormData,l&&u.append("file",l),Object.keys(s).forEach(function(p){var i=s[p];i!=null&&(_typeof(i)==="object"&&!(i instanceof File)?i instanceof Array?i.forEach(function(E){return u.append(p,E||"")}):u.append(p,JSON.stringify(i)):u.append(p,i))}),d.abrupt("return",request("/api/chart/gen/async",_objectSpread({method:"POST",params:_objectSpread({},n),data:u,requestType:"form"},a||{})));case 4:case"end":return d.stop()}},e)})),N.apply(this,arguments)}function V(e,n,s,l){return r.apply(this,arguments)}function r(){return r=_()(o()().mark(function e(n,s,l,a){var u;return o()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return u=new FormData,l&&u.append("file",l),Object.keys(s).forEach(function(p){var i=s[p];i!=null&&(P()(i)==="object"&&!(i instanceof File)?i instanceof Array?i.forEach(function(E){return u.append(p,E||"")}):u.append(p,JSON.stringify(i)):u.append(p,i))}),d.abrupt("return",(0,m.request)("/api/chart/gen/async/mq",c()({method:"POST",params:c()({},n),data:u,requestType:"form"},a||{})));case 4:case"end":return d.stop()}},e)})),r.apply(this,arguments)}function W(e,n){return R.apply(this,arguments)}function R(){return R=_()(o()().mark(function e(n,s){return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,m.request)("/api/chart/get",c()({method:"GET",params:c()({},n)},s||{})));case 1:case"end":return a.stop()}},e)})),R.apply(this,arguments)}function z(e,n){return Z.apply(this,arguments)}function Z(){return Z=_()(o()().mark(function e(n,s){return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,m.request)("/api/chart/list/page",c()({method:"POST",headers:{"Content-Type":"application/json"},data:n},s||{})));case 1:case"end":return a.stop()}},e)})),Z.apply(this,arguments)}function b(e,n){return G.apply(this,arguments)}function G(){return G=_()(o()().mark(function e(n,s){return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,m.request)("/api/chart/my/list/page/",c()({method:"POST",headers:{"Content-Type":"application/json"},data:n},s||{})));case 1:case"end":return a.stop()}},e)})),G.apply(this,arguments)}function J(e,n){return T.apply(this,arguments)}function T(){return T=_()(o()().mark(function e(n,s){return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,m.request)("/api/chart/retry",c()({method:"GET",params:c()({},n)},s||{})));case 1:case"end":return a.stop()}},e)})),T.apply(this,arguments)}function j(e,n){return g.apply(this,arguments)}function g(){return g=_()(o()().mark(function e(n,s){return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,m.request)("/api/chart/update",c()({method:"POST",headers:{"Content-Type":"application/json"},data:n},s||{})));case 1:case"end":return a.stop()}},e)})),g.apply(this,arguments)}}}]);
